# 週報 (2025-09-29 〜 2025-10-03)

## 今週の作業内容

- **feature/reset-question** 系の開発フローを整理  
  - 毎日の作業ブランチ（例：feature/reset-question251001, 251002 …）を作成し、  
    親ブランチ `feature/reset-question` へマージして履歴を残す運用を確立  
- **リセット機能の改良**
  - クイズ単位・設問単位でのリセット機能を実装  
  - 管理画面から flower / love / planet の各診断ごとに直接リセット可能にした  
- **Docker 環境での再現性向上**
  - `docker compose down -v` → `up -d --build` によるクリーン起動を検証  
  - DB 初期化に伴うデータ消去を確認し、再現性のあるデバッグ手順を確立  
  - API のヘルスチェック (`/api/health`)、ログ保存 (`/api/logs`)、集計 (`/api/stats/summary`) を確認  
- **フロントエンド動作確認**
  - Docker 上で `vite preview` が起動することを確認  
  - ERR_EMPTY_RESPONSE の原因が `--host` オプション不足であると特定し、修正方法を整理  
  - `/admin` ダッシュボードでリセットボタン動作を確認  

## 詰まった点・対応
- **npm run lint / typecheck が未定義**  
  → `npm run build` に型チェックが含まれていることを確認し、Lint は不要と判断  
- **フロントアクセス不可 (ERR_EMPTY_RESPONSE)**  
  → `vite preview` の `--host 0.0.0.0` を追加して解決  
- **ブランチ名の混在 (スラッシュ / ハイフン)**  
  → 実在ブランチ名を確認して適切にマージする手順を整理  

- **logicbenchの起動**
- **データ準備**
  - `data/dev.jsonl`・`data/gold.jsonl` を更新し、開発用のサンプルデータを整備
  - Git 管理対象を整理（成果物は `.gitignore` で除外、レポートのみコミットする方針）

- **ローカルテスト実行**
  - `scripts/run_eval.py` にて推論を実行
  - `scripts/score.py` にてスコアリング
  - `scripts/report.py` にてサマリーを作成
  - 3回のローカルテストを実施（10/3）
    - いずれも **acc=0.667 (2/3)** で安定
    - 平均レイテンシは **2318ms → 1640ms** と改善傾向
  - 実行結果をレポート (`logicbench_test_report_20251003*.md`) として GitHub `dev` ブランチに反映

- **レポート作成**
  - 各回のテストレポートを Markdown 形式で保存
  - 日報・週報を PDF / Markdown で作成し、提出用に整備

## つまずいた点
- **スクリプトの場所・実行方法**
  - `run.py` が見つからずエラー → 実際は `scripts/run_eval.py`
  - `score.py` / `report.py` の引数指定を間違え、`--pred` などオプション形式で実行 → **位置引数指定が正解**
- **Git 管理対象の混乱**
  - `runs/`・`reports/` ディレクトリが `.gitignore` により無視される → Markdown レポートのみコミットされる仕様を再確認

## 今後の対応
- サンプル数が少ないため、**失敗ケース分析** と **データセット拡充** が必要
- テスト自動化のため `Makefile` ターゲットを整備予定（`make run-dev` など）
- 精度向上や安定化に向けて改善点を検討

